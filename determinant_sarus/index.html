<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
    <script src="	https://unpkg.com/mathjs@9.5.2/lib/browser/math.js"></script>
    <script src="det_sarrus.js" defer></script>
    <link rel="stylesheet" href="style.css">
    <title>Determinant rozvoj</title>
  </head>
  <body>
    
    <div id="matrix_input">
        <input id="1" type="number">
        <input id="2" type="number">
        <input id="3" type="number">
        <input id="4" type="number">
        <input id="5" type="number">
        <input id="6" type="number">
        <input id="7" type="number">
        <input id="8" type="number">
        <input id="9" type="number">
        <input id="10" type="number">
        <input id="11" type="number">
        <input id="12" type="number">
        <input id="13" type="number">
        <input id="14" type="number">
        <input id="15" type="number">
        <input id="16" type="number">
    </div>
    <!-- <label for="riadok">Zadaj riadok:</label>
    <input id="riadok" type="number" />
    <label for="stlpec">Zadaj stlpec:</label>
    <input id="stlpec" type="number" /> -->
    <p id="vysledok"></p>
    <button type="button" id="vypocitaj" class="btn btn-success">Vypočítaj</button>

    <style>
      #matrix-input td {
        padding: 0.2rem;
      }
      #matrix-input td:focus-within input {
        outline: none;
        background-color: greenyellow;
      }
      #matrix-input {
        margin:auto;
        border-right: 1px solid black;
        border-left: 1px solid black;
      }
    </style>
    <div style="text-align: center;">
      <label for="matrix-size">Matrix Size:</label>
    <input style="border: none;border-bottom: 1px solid green" type="number" id="matrix-size" name="matrix-size" value="3" min="1" max="10">
    
    
    <div style="display: flex; justify-content: center;">
      <table style="margin: 1rem ;" id="matrix-input">
      <tbody >
        <!-- use a loop to create rows and columns based on user input -->
        <?php for ($i = 0; $i < 3; $i++) : ?>
          <tr>
            <?php for ($j = 0; $j < 3; $j++) : ?>
              <td>
                <input type="number" name="matrix[<?= $i ?>][<?= $j ?>]" value="0" style="width: 1.5rem;">
              </td>
            <?php endfor; ?>
          </tr>
        <?php endfor; ?>
      </tbody>
    </table>
    <p id="mxVysledok" style="margin: auto 0;"> =</p>
    </div>
    
    <button id="calcBTN" type="button" class="btn btn-outline-success">Vypočítaj</button>
    </div>
    <script>
      const matrixSizeInput = document.getElementById('matrix-size');
      const matrixInputTable = document.getElementById('matrix-input').querySelector('tbody');
    
      function createMatrix() {
        const matrixSize = parseInt(matrixSizeInput.value);
        matrixInputTable.innerHTML = '';
    
        for (let i = 0; i < matrixSize; i++) {
          const row = document.createElement('tr');
    
          for (let j = 0; j < matrixSize; j++) {
            const cell = document.createElement('td');
            const input = document.createElement('input');
    
            input.type = 'number';
            input.name = `matrix[${i}][${j}]`;
            input.value = 0;
            input.style.width = '1.5rem';
            input.style.textAlign = "center";
            input.style.border = "none";
    
            // add event listeners for arrow keys
            input.addEventListener('keydown', (event) => {
              if (event.key === 'ArrowRight') {
                const nextCell = cell.nextElementSibling;
                if (nextCell) {
                  nextCell.querySelector('input').focus();
                }
              } else if (event.key === 'ArrowLeft') {
                const prevCell = cell.previousElementSibling;
                if (prevCell) {
                  prevCell.querySelector('input').focus();
                }
              } else if (event.key === 'ArrowDown') {
                event.preventDefault();
                const nextRow = row.nextElementSibling;
                if (nextRow) {
                  nextRow.children[j].querySelector('input').focus();
                }
              } else if (event.key === 'ArrowUp') {
                event.preventDefault();
                const prevRow = row.previousElementSibling;
                if (prevRow) {
                  prevRow.children[j].querySelector('input').focus();
                }
              }
            });
    
            cell.appendChild(input);
            row.appendChild(cell);
          }
    
          matrixInputTable.appendChild(row);
        }
      }
    
      // create the initial matrix
      createMatrix();
    
      // update the matrix when the user changes the size input
      matrixSizeInput.addEventListener('change', createMatrix);
    </script>
    
    
  </body>
</html>
